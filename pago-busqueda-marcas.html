<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pago - Búsqueda de Marcas | Sinapsis Legal</title>
    <meta name="description" content="Realiza el pago para búsqueda de marcas. Servicio profesional de búsqueda y análisis de marcas comerciales en México.">
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="LogoSNPSLGLcerebro.png" type="image/png">
    <script src="https://js.stripe.com/v3/"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
    <header>
        <nav>
            <div class="logo">
                <img src="LogoSNPSLGLcerebro.png" alt="Sinapsis Legal Logo">
                <span>Sinapsis Legal</span>
            </div>
                <ul>
                    <li><a href="index.html">Inicio</a></li>
                    <li><a href="servicios.html">Servicios</a></li>
                    <li><a href="contacto.html">Contacto</a></li>
                </ul>
            </nav>
    </header>

    <main class="payment-container">
        <div class="payment-header">
            <h1>Pago - Búsqueda de Marcas</h1>
            <p>Servicio profesional de búsqueda y análisis de marcas comerciales</p>
        </div>

        <div class="payment-content">
            <div class="service-summary">
                <h2>Resumen del Servicio</h2>
                <div class="service-details">
                    <div class="service-item">
                        <span class="service-name">Búsqueda de Marcas</span>
                        <span class="service-price">$1,800 MXN</span>
                    </div>
                    <div class="service-item">
                        <span class="service-name">Análisis de Similitud</span>
                        <span class="service-price">$900 MXN</span>
                    </div>
                    <div class="service-item">
                        <span class="service-name">Reporte Detallado</span>
                        <span class="service-price">$600 MXN</span>
                    </div>
                    <div class="service-item total">
                        <span class="service-name">Total</span>
                        <span class="service-price">$3,300 MXN</span>
                    </div>
                </div>
            </div>

            <form id="paymentForm" class="payment-form">
                <div class="form-section">
                    <h3>Información Personal</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="nombre">Nombre Completo *</label>
                            <input type="text" id="nombre" name="nombre" required>
                        </div>
                        <div class="form-group">
                            <label for="email">Correo Electrónico *</label>
                            <input type="email" id="email" name="email" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="telefono">Teléfono *</label>
                            <input type="tel" id="telefono" name="telefono" required>
                        </div>
                        <div class="form-group">
                            <label for="empresa">Empresa (opcional)</label>
                            <input type="text" id="empresa" name="empresa">
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>Información de la Marca a Buscar</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="nombreMarca">Nombre de la Marca *</label>
                            <input type="text" id="nombreMarca" name="nombreMarca" required>
                        </div>
                        <div class="form-group">
                            <label for="tipoMarca">Tipo de Marca *</label>
                            <select id="tipoMarca" name="tipoMarca" required>
                                <option value="">Seleccionar tipo</option>
                                <option value="nominativa">Nominativa (solo texto)</option>
                                <option value="figurativa">Figurativa (solo imagen)</option>
                                <option value="mixta">Mixta (texto + imagen)</option>
                                <option value="tridimensional">Tridimensional</option>
                                <option value="sonora">Sonora</option>
                                <option value="olfativa">Olfativa</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="clasesNiza">Clases de Niza *</label>
                            <input type="text" id="clasesNiza" name="clasesNiza" placeholder="Ej: 9, 35, 42" required>
                        </div>
                        <div class="form-group">
                            <label for="descripcion">Descripción de Productos/Servicios *</label>
                            <textarea id="descripcion" name="descripcion" rows="3" required></textarea>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>Alcance de la Búsqueda</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="territorio">Territorio de Búsqueda *</label>
                            <select id="territorio" name="territorio" required>
                                <option value="">Seleccionar territorio</option>
                                <option value="mexico">Solo México</option>
                                <option value="internacional">Internacional</option>
                                <option value="latinoamerica">Latinoamérica</option>
                                <option value="norteamerica">Norteamérica</option>
                                <option value="europa">Europa</option>
                                <option value="asia">Asia</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="tipoBusqueda">Tipo de Búsqueda *</label>
                            <select id="tipoBusqueda" name="tipoBusqueda" required>
                                <option value="">Seleccionar tipo</option>
                                <option value="identica">Búsqueda Idéntica</option>
                                <option value="similar">Búsqueda por Similitud</option>
                                <option value="completa">Búsqueda Completa</option>
                                <option value="fonetica">Búsqueda Fonética</option>
                                <option value="conceptual">Búsqueda Conceptual</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="fechaLimite">Fecha Límite de Búsqueda</label>
                            <input type="date" id="fechaLimite" name="fechaLimite">
                        </div>
                        <div class="form-group">
                            <label for="prioridad">Prioridad del Servicio</label>
                            <select id="prioridad" name="prioridad">
                                <option value="normal">Normal (5-7 días hábiles)</option>
                                <option value="urgente">Urgente (2-3 días hábiles) +$500</option>
                                <option value="express">Express (24 horas) +$1,000</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>Información Adicional</h3>
                        <div class="form-group">
                        <label for="marcasSimilares">Marcas Similares Conocidas (opcional)</label>
                        <textarea id="marcasSimilares" name="marcasSimilares" rows="3" placeholder="Menciona marcas similares que conozcas"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="observaciones">Observaciones Especiales</label>
                        <textarea id="observaciones" name="observaciones" rows="3" placeholder="Cualquier información adicional relevante"></textarea>
                    </div>
                </div>

                <div class="form-section">
                    <h3>Método de Pago</h3>
                    <div class="payment-methods">
                        <label class="payment-method">
                            <input type="radio" name="paymentMethod" value="card" checked>
                            <span class="checkmark"></span>
                            Tarjeta de Crédito/Débito
                        </label>
                        <label class="payment-method">
                            <input type="radio" name="paymentMethod" value="transfer">
                            <span class="checkmark"></span>
                            Transferencia Bancaria
                        </label>
                    </div>
                </div>

                <div class="form-section">
                    <h3>Términos y Condiciones</h3>
                    <div class="terms-checkbox">
                        <label>
                            <input type="checkbox" id="terminos" name="terminos" required>
                            <span class="checkmark"></span>
                            Acepto los <a href="#" target="_blank">términos y condiciones</a> del servicio
                        </label>
                    </div>
                    <div class="terms-checkbox">
                        <label>
                            <input type="checkbox" id="privacidad" name="privacidad" required>
                            <span class="checkmark"></span>
                            Acepto la <a href="aviso-privacidad.html" target="_blank">política de privacidad</a>
                        </label>
                    </div>
                    <div class="terms-checkbox">
                        <label>
                            <input type="checkbox" id="autorizacion" name="autorizacion" required>
                            <span class="checkmark"></span>
                            Autorizo a Sinapsis Legal para realizar la búsqueda de marcas y contactarme con los resultados
                        </label>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn-pay">
                        <span class="btn-text">Pagar $3,300 MXN</span>
                        <span class="btn-loading" style="display: none;">
                            <div class="spinner"></div>
                            Procesando...
                        </span>
                    </button>
                </div>
            </form>
        </div>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h4>Sinapsis Legal</h4>
                <p>Especialistas en Propiedad Intelectual</p>
            </div>
            <div class="footer-section">
                <h4>Contacto</h4>
                <p>Email: info@sinapsislegal.com</p>
                <p>Tel: +52 55 1234 5678</p>
            </div>
            <div class="footer-section">
                <h4>Enlaces</h4>
                <ul>
                    <li><a href="aviso-privacidad.html">Aviso de Privacidad</a></li>
                    <li><a href="constitucion.html">Constitución</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 Sinapsis Legal. Todos los derechos reservados.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('paymentForm');
            const prioritySelect = document.getElementById('prioridad');
            const totalPrice = document.querySelector('.total .service-price');
            const basePrice = 3300;

            // Update total price based on priority
            prioritySelect.addEventListener('change', function() {
                let additionalCost = 0;
                if (this.value === 'urgente') {
                    additionalCost = 500;
                } else if (this.value === 'express') {
                    additionalCost = 1000;
                }
                
                const newTotal = basePrice + additionalCost;
                totalPrice.textContent = `$${newTotal.toLocaleString()} MXN`;
                
                // Update button text
                const btnText = document.querySelector('.btn-text');
                btnText.textContent = `Pagar $${newTotal.toLocaleString()} MXN`;
            });

            form.addEventListener('submit', async function(e) {
                e.preventDefault();
                
                const submitBtn = document.querySelector('.btn-pay');
                const btnText = document.querySelector('.btn-text');
                const btnLoading = document.querySelector('.btn-loading');
                
                // Show loading state
                btnText.style.display = 'none';
                btnLoading.style.display = 'flex';
                submitBtn.disabled = true;

                try {
                    // Collect form data
                    const formData = new FormData(form);
                    const data = Object.fromEntries(formData.entries());
                    
                    // Add service type and total price
                    data.servicio = 'busqueda-marcas';
                    data.precio = basePrice + (data.prioridad === 'urgente' ? 500 : data.prioridad === 'express' ? 1000 : 0);
                    
                    // Send to backend
                    const response = await fetch('/.netlify/functions/guardarFormulario', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(data)
                    });

                    if (response.ok) {
                        const result = await response.json();
                        
                        // Show success message
                        Swal.fire({
                            title: '¡Formulario Enviado Exitosamente!',
                            text: 'Nos pondremos en contacto contigo pronto para confirmar los detalles de tu búsqueda de marcas.',
                            icon: 'success',
                            confirmButtonText: 'Entendido',
                            confirmButtonColor: '#4CAF50'
                        }).then(() => {
                            // Redirect to thank you page or reset form
                            window.location.href = 'redirect-after-payment.html';
                        });
                    } else {
                        throw new Error('Error en el servidor');
                    }
                } catch (error) {
                    console.error('Error:', error);
                    
                    // Show error message
                    Swal.fire({
                        title: 'Error al Enviar',
                        text: 'Hubo un problema al enviar el formulario. Por favor, inténtalo de nuevo.',
                        icon: 'error',
                        confirmButtonText: 'Reintentar',
                        confirmButtonColor: '#f44336'
                    });
                } finally {
                    // Reset button state
                    btnText.style.display = 'inline';
                    btnLoading.style.display = 'none';
                    submitBtn.disabled = false;
                }
            });

            // Form validation
            const requiredFields = form.querySelectorAll('[required]');
            requiredFields.forEach(field => {
                field.addEventListener('blur', function() {
                    if (!this.value.trim()) {
                        this.classList.add('error');
                    } else {
                        this.classList.remove('error');
                    }
                });
            });
        });
    </script>
</body>
</html> 